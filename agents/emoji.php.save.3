<?php
// Call regularly from cron 
// On call determine best thing to be addressed.

// Start by picking a random thing and seeing what needs to be done.


//ini_set('display_startup_errors', 1);
//ini_set('display_errors', 1);
//error_reporting(-1);

//require '/home/wildtay3/public_html/stackr/vendor/autoload.php';
//require '../vendor/autoload.php';
require '/var/www/html/stackr.ca/vendor/autoload.php';

//require '../src/watson.php';
//require '../src/translink.php';



class Emoji {

	// Responds to a query from $from to useragent@stackr.co

	function __construct(Thing $thing)
    {

        // Generate an iching reading.

		$this->thing = $thing;
        $this->agent_prefix = 'Agent "Emoji"';

//        $this->thing_report  = array("thing"=>$this->thing->thing);
        $this->thing_report['thing'] = $this->thing->thing;

	    $this->uuid = $thing->uuid;
        $this->to = $thing->to;
        $this->from = $thing->from;
	    $this->subject = $thing->subject;
		$this->sqlresponse = null;

		$this->thing->log($this->agent_prefix . 'running on Thing ' . $this->thing->nuuid .'.');

		$this->thing->log($this->agent_prefix . 'received this Thing "' . $this->subject .  '".');


// http://unicode.org/Public/emoji/5.0/emoji-data.txt

$file = '/var/www/html/stackr.ca/resources/unicode.txt';
$file = '/var/www/html/stackr.ca/resources/emoji-variation-sequences.txt';
$file = '/var/www/html/stackr.ca/resources/emoji-keywords.txt';


$this->libraryEmoji();

$searchfor = "robot";

// the following line prevents the browser from parsing this as HTML.
header('Content-Type: text/plain');

// get the file contents, assuming the file to be readable (and exist)
//$contents = file_get_contents($file);
$contents = $this->emoji_reference;
// escape special characters in the query
$pattern = preg_quote($searchfor, '/');
// finalise the regular expression, matching the whole line
$pattern = "/^.*$pattern.*\$/m";
// search, and store all matching occurences in $matches
if(preg_match_all($pattern, $contents, $matches)){
   echo "Found matches:\n";
   echo implode("\n", $matches[0]);
}
else{
   echo "No matches found";
}

exit();

        $this->thing->json->setField("variables");
        $time_string = $this->thing->json->readVariable( array("emoji", "refreshed_at") );

        if ($time_string == false) {
            $this->thing->json->setField("variables");
            $time_string = $this->thing->json->time();
            $this->thing->json->writeVariable( array("emoji", "refreshed_at"), $time_string );
        }


        // If it has already been processed ...
        $this->thing->json->setField("variables");
        $this->reading = $this->thing->json->readVariable( array("emoji", "reading") );

        if ( ($this->reading == false) ) {
            $this->thing->log( '<pre> Agent "Emoji" setReminders() </pre>' );
			$response = $this->hexagramGenerator();

            $this->thing->json->writeVariable( array("emoji", "reading"), $this->reading );

			$this->readSubject();
			$this->response();
        }


        //$this->response();


		$this->response_format = "text no images";

        $this->drawHexagram();


		// We are going to be looking


//		$this->thing_report['thing'] = $this->thing->thing;


		$this->thing->log($this->agent_prefix . 'completed with a reading of ' . $this->reading . '.');
        $this->thing_report['log'] = $this->thing->log;

	}



	function getReading() {

		foreach (str_split(strval($this->reading)) as $number) {

			if ($number == 9) {
				$line[0] = 'yin';
				$line[2] = 'changing';
			}

            if ($number == 7) {
                                $line[0] = 'yin';
                                $line[2] = '';
                        }


                        if ($number == 8) {
                                $line[0] = 'yang';
                                $line[2] = '';
                        }

                        if ($number == 8) {
                                $line[0] = 'yang';
                                $line[2] = 'changing';
                        }

		$lines[] = $line;


		echo "<br>";
		echo $number;
		}






	}

	function setReading() {

		// Not used

		$r = "";

		foreach($this->lines as $line) {
			//echo $line[0]
			if ($line[0] == 'yin')  {
				if ($line[2] == 'changing') { 
					$r .= "9";
				} else {
					$r .= "7";
				}
			}

                        if ($line[0] == 'yang') {
                                if ($line[2] == 'changing') { 
                                        $r .= "6";
                                } else {
                                	$r .= "8";
				}
                        }



			echo "<br>";
		}

		echo "r" . $r;
		$this->reading = $r;
		return $this->reading;

	}


	public function response() {

		$this->cost = 100;

		// Thing stuff


		$this->thing->flagGreen();

		// Compose email

		$status = false;
		$this->response = false;
		$keywords = array('setting');

		$iching_query = $this->subject;


		$this->thing->log( "this reading:" . $this->reading );
		//$this->reading = $this->hexagramGenerator();

//                $lower = substr($input,0,3);
  //              $upper = substr($input,3,6);


		$lower = $this->trigramLookup( substr($this->reading, 0,3));
		$upper = $this->trigramLookup( substr($this->reading, 3, 6));
		//$lower = $response['lower']['trigram'];

		//$hexagram = $response['hexagram'];

		$hexagram_number = $this->readingtoHexagram();

		$hexagram_text = $this->interpretHexagram($hexagram_number);


		$response = '';
		$response .= "Hexagram ". $hexagram_number . ' ' .$hexagram_text[0] . ' ' . $hexagram_text[1]
			. ' ' . $hexagram_text[2] . '<br>';

		$response .= "Changing lines:";
		$response .= $this->changinglines();
		$response .= '<br><br>';

		$this->sms_message = $response;

		$response .= '<a href = "' . $this->cafeausoul($hexagram_number)[0] . '">Cafe au Soul reading: ' .
		$this->cafeausoul($hexagram_number)[1] . '</a><br>';

		$response .= '<a href = "http://www.jamesdekorne.com/GBCh/hex' . $hexagram_number . '.htm">James deKorne: Hexagram ' .$hexagram_number.'</a>';
		$response .= "<br>";

		$response .= "<br>";

		$response .= "upper trigram: ".$upper[2] . ' / ' .$upper[3] . '<br>';
		$response .= "lower trigram: ".$lower[2] . ' / ' .$lower[3] . '<br><br>';

$this->drawHexagram();
//exit();

$response .= '<br>';
$response .= '<img src = "https://stackr.ca/thing/' . $this->uuid . '/iching.png" alt = "Hexagram ' . $hexagram_number . ' ' . $hexagram_text[0] . ' '.  $hexagram_text[1] . '">';
$response .= '<br>';
//echo  $this->thing_report['png'];
//exit();

		if ($this->response_format == "text no images") {
			$response .= $this->textHexagram();
			} else {
			$response .= $this->drawHexagram();
			}


		$subject = 	"Hexagram ". $hexagram_number . ' ' .$hexagram_text[0] . ' ' . $hexagram_text[1] 
			. ' ' . $hexagram_text[2];
		//echo $this->from;


		$this->thing_report['email'] = array('to'=>$this->from,
				'from'=>'iching',
				'subject' => $this->subject,
				'message' => $response,
				'choices' => false);

//echo $this->thing->account['stack']->balance['amount'];

// Prepare sms response


                $this->sms_message = 'ICHING | ';
                $this->sms_message .= "Hexagram ". $hexagram_number . ' ' . $hexagram_text[1]  . ' ' . $hexagram_text[2];

		if ($this->changinglines() == null ) {
                $this->sms_message .= " unchanging ";
		} else {
		$this->sms_message .= " with changing lines ";
                $this->sms_message .= $this->changinglines();
		}
                $this->sms_message .= " | TEXT ICHING <question>";

                //$this->sms_message = "Bleep";

		$this->thing_report['sms'] = $this->sms_message;

		$this->thing_report['message'] = "hello";


//                if ( is_numeric($this->from) ) {
//                        require_once '/var/www/html/stackr.ca/agents/sms.php';

                 //       $this->readSubject();


//                        $sms_thing = new Sms($this->thing, $this->sms_message);
//                        $this->thing_report['choices'] = false;
//                        $this->thing_report['info'] = 'SMS sent';

			//$this->thing->log("sms sent");

//                return $thing_report;
//                 }
//
		require_once '/var/www/html/stackr.ca/agents/makeemail.php';
		$email = new Makeemail($this->thing);

		$this->thing_report['email'] = $email->thing_report['email'];
		$this->thing_report['message'] = $response;

        if ($this->thing->account['stack']->balance['amount'] >= $this->cost) {

            $this->thing->log( $this->agent_prefix . 'found enough balance to send a Message.');
            $message_thing = new Message($this->thing, $this->thing_report);

            $this->thing_report['info'] = $message_thing->thing_report['info'] ;

            $this->thing->account['stack']->Debit($this->cost);

        } else {

            $this->thing->log( '<pre> Agent "Iching" NOT enough balance to send a Message</pre>');

        }



// Prepare PNG

		$this->drawHexagram();


                $this->thing->json->writeVariable(array("iching", "reading"), $this->reading);



		return $this->thing_report;
	}



	public function readSubject() {

		$status = true;

	return $status;		
	}



	public function changinglines() {
		$i = 0;
		$x = "";

                foreach (str_split(strval($this->reading)) as $number) {

                        if ( ($number == 9 ) or ($number == 6) ) {
				$x .= " ". ($i+1) ;
                        }
                        $i++;
                }

		return $x;
	}

        public function readingtoHexagram() {
                $i = 0;
                $response ="";

		$input = "";

                foreach (str_split(strval($this->reading)) as $number) {

                        if ( $number == 9 ) {$input .= 7;}
                        if ( $number == 8) {$input .= 6;}
                        if ( ($number == 7) or ($number == 6) ) {$input .= $number;}

                }

//echo "<br>input:" . $input;

                $lower = substr($input,0,3);
                $upper = substr($input,3,6);
//echo "<br>" .$lower . ' ' .$upper;	

		$lower_trigram = $this->trigramLookup($lower);
		$upper_trigram = $this->trigramLookup($upper);

		$number = $this->hexagramLookup($lower_trigram, $upper_trigram);
//echo "<br>num:" .$number;

                return $number;
        }



	public function textHexagram() {
		$i = 0;
		$response ="";

                foreach (array_reverse(str_split(strval($this->reading))) as $number) {

			if ( $number == 9 ) {$response .= '--- changing<br>';}

                        if ( $number == 8) {$response .= '- -<br>';}


                        if ($number == 7) {
                                $response .= '---<br>';
                                }


                        if ($number == 6) {
                                $response .= '- - changing<br>';
                                }

			}
		$this->text_hexagram = $response;
		return $this->text_hexagram;
		}

	public function drawHexagram() {

		

		$width = 70;
		$bar_height = 8;
		$border = 4;

		// Create a 70x100 image
		$im = imagecreatetruecolor($width, 100);
		$white = imagecolorallocate($im, 255, 255, 255);
		$black = imagecolorallocate($im, 0, 0, 0);
		$red = imagecolorallocate($im, 255, 0, 100);

		// Make the background transparent
		imagecolortransparent($im, $white);
		imagefilledrectangle($im, 0, 0, 70, 100, $white);

		$x_centre = $width / 2;

		$i = 0;

		foreach (str_split(strval($this->reading)) as $number) {

		//foreach ($lines as $line) {
			$y_low_left_corner = 4+16*(5-$i);
			if ( ($number == 6) or ($number == 9) ) {$color = $red;} else {$color = $black;}
			if ( ($number == 7) or ($number == 9) ) {
				imagefilledrectangle($im, $border, $y_low_left_corner, $width-$border, 	$y_low_left_corner + $bar_height, $color);			
			} else {
				imagefilledrectangle($im, $border, $y_low_left_corner, 26, $y_low_left_corner + $bar_height, $color);
				//imagefilledrectangle($im, 22+$border, $y_low_left_corner, 26+18, $y_low_left_corner + $bar_height, $color);
				imagefilledrectangle($im, -4+26+18+$border, $y_low_left_corner, $width-$border, $y_low_left_corner + $bar_height, $color);
			}
			$i++;
		}

		// Save the image
		//header('Content-Type: image/png');
		//imagepng($im);

		ob_start();
		imagepng($im);
		$imagedata = ob_get_contents();
		ob_end_clean();

		$this->thing_report['png'] = $imagedata;

		//echo '<img src="data:image/png;base64,'.base64_encode($imagedata).'"/>';
		$response = '<img src="data:image/png;base64,'.base64_encode($imagedata).'"alt="hexagram"/>';


		imagedestroy($im);

		return $response;

	}




	function bitFlip($n_bits) {

		$bit_string = "";


		for ($i = 0; $i <= $n_bits-1; $i++) {


				$bit_string .= rand(0,1);

		}
				


		return $bit_string;
	}	



	function trigramLookup($trigram_reading) {
//echo "t". $trigram_reading;
		$input = "";

                foreach (str_split(strval($trigram_reading)) as $number) {
			if (($number == 7) or ($number == 8)) {
				$input .= $number;
			}

                        if ( $number == 6)  {
                                $input .= 8;
                        }

                        if ( $number == 9)  {
                                $input .= 7;
                        }


		}


                $trigram_lookup = array('777' => array(0,"Chien", "Chien Qián 乾", "Heaven, Sky, Air"),
                                '778' => array(1, "Tui", "Tui Duì 兌", "Lake Valley"),
                                '787' => array(2, "Li", "Li 離", "Fire"),
                                '788' => array(3, "Chen", "Chen Zhèn 震", "Thunder"),
                                '877' => array(4, "Sun", "Sun Xùn 巽", "Wind"),
                                '878' => array(5, "Kan", "K'an 坎", "Water"),
                                '887' => array(6, "Ken", "Ken Gèn 艮", "Mountain"),
                                '888' => array(7, "Kun", "K'un Kūn 坤", "Earth"),
                                );
		
//echo $input;
//echo $trigram_lookup[$input];
//exit();
		return $trigram_lookup[$input];

	}

    function trigramGenerator() {

		// Heads counts as 2, tails counts as 3

		$random_bits = $this->bitFlip(9);
		//echo $random_bits;

		//echo "<br>";
		$lines = str_split($random_bits,3);
		$trigram = null;
		$line_readings = array();

		$i = 0;

		$r = "";


		foreach ($lines as $line) {

			$line_sum = null;
			$line = str_split($line,1);

			foreach ($line as $cointoss) {
				if ($cointoss == 1) {
					$line_sum = $line_sum + 2;
				} else {

					$line_sum = $line_sum + 3;
				}

			}
			

			switch ($line_sum) {
				case 6:
					array_push($line_readings, array("yin","- -","changing"));
					$r .= '6';
					$trigram .= '0';
					//echo "- -";
					break;
				case 7:
					array_push($line_readings, array("yang","---",""));
					$trigram .= '1';
//echo "---";
					$r .= '7';
					break;
				case 8:
					array_push($line_readings, array("yin","- -",""));
					$trigram .= '0';
//echo "- -";
					$r .= '8';

					break;
				case 9:
					array_push($line_readings, array("yang","---","changing"));
					$trigram .= '1';
//echo "---";
					$r .= '9';

					break;
			}



		$i++;	
		}

                return array("trigram"=>$this->trigramLookup($r),"lines"=>$line_readings, "reading"=>$r);
		

//		return array("trigram"=>$trigram_lookup[$trigram],"lines"=>$line_readings, "reading"=>$r);
	}

	function cafeausoul($n) {

		$cafeausoul_lookup = array(
	1 => array("http://cafeausoul.com/iching/qian-creative","Qián The Creative"),
	2 => array("http://cafeausoul.com/iching/kun-receptive","K'un The Receptive"),
	3 => array("http://cafeausoul.com/iching/chun-difficult-beginnings","Chun Difficult Beginnings"),
	4 => array("http://cafeausoul.com/iching/meng-youthful-folly","Meng Youthful Folly"),
	5 => array("http://cafeausoul.com/iching/hsu-nourished-while-waiting","Hsu Nourished While Waiting"),
	6 => array("http://cafeausoul.com/iching/sung-conflict","Sung Conflict"),
	7 => array("http://cafeausoul.com/iching/shih-army","Shih Army"),
	8 => array("http://cafeausoul.com/iching/pi-uniting","Pi Uniting"),
	9 => array("http://cafeausoul.com/iching/hsiao-chu-small-restraint","Hsiao Ch'u Small Restraint"),
	10 => array("http://cafeausoul.com/iching/lu-treading","Lu Treading"),
	11 => array("http://cafeausoul.com/iching/tai-peace","T'ai Peace"),
	12 => array("http://cafeausoul.com/iching/pi-standstill","P'i Standstill"),
	13 => array("http://cafeausoul.com/iching/tung-jen-fellowship","T'ung Jen Fellowship"),
	14 => array("http://cafeausoul.com/iching/ta-yu-great-possessing","Ta Yu Great Possessing"),
	15 => array("http://cafeausoul.com/iching/qian-authenticity","Qian Authenticity"),
	16 => array("http://cafeausoul.com/iching/yu-enthusiasm","Yu Enthusiasm"),
	17 => array("http://cafeausoul.com/iching/sui-following","Sui Following"),
	18 => array("http://cafeausoul.com/iching/ku-decay","Ku Decay"),
	19 => array("http://cafeausoul.com/iching/lin-approach","Lin Approach"),
	20 => array("http://cafeausoul.com/iching/kuan-contemplation","Kuan Contemplation"),
	21 => array("http://cafeausoul.com/iching/shi-ho-biting-through","Shi Ho Biting Through"),
	22 => array("http://cafeausoul.com/iching/bi-grace","Bi Grace"),
	23 => array("http://cafeausoul.com/iching/po-split-apart","Po Split Apart"),
	24 => array("http://cafeausoul.com/iching/fu-return","Fu Return"),
	25 => array("http://cafeausoul.com/iching/wu-wang-innocence","Wu Wang Innocence"),
	26 => array("http://cafeausoul.com/iching/ta-chu-controlled-power","Ta Ch’u Controlled Power"),
	27 => array("http://cafeausoul.com/iching/yi-nourishing-vision","Yi Nourishing Vision"),
	28 => array("http://cafeausoul.com/iching/ta-kuo-critical-mass","Ta Kuo Critical Mass"),
	29 => array("http://cafeausoul.com/iching/kn-abyss","Kǎn Abyss"),
	30 => array("http://cafeausoul.com/iching/li-clarity","Li Clarity"),
	31 => array("http://cafeausoul.com/iching/hsien-influencewooing","Hsien Influence/Wooing"),
	32 => array("http://cafeausoul.com/iching/heng-duration","Heng Duration"),
	33 => array("http://cafeausoul.com/iching/tun-retreat","Tun Retreat"),
	34 => array("http://cafeausoul.com/iching/da-zhuang-great-power","Da Zhuang Great Power"),
	35 => array("http://cafeausoul.com/iching/chin-progress","Chin Progress"),
	36 => array("http://cafeausoul.com/iching/ming-yi-brightness-hiding","Ming Yi Brightness Hiding"),
	37 => array("http://cafeausoul.com/iching/chia-jen-family","Chia Jen Family"),
	38 => array("http://cafeausoul.com/iching/kuei-opposition","K’uei Opposition"),
	39 => array("http://cafeausoul.com/iching/jian-obstruction","Jian Obstruction"),
	40 => array("http://cafeausoul.com/iching/jie-liberation","Jie Liberation"),
	41 => array("http://cafeausoul.com/iching/sun-decrease","Sun Decrease"),
	42 => array("http://cafeausoul.com/iching/yi-increase","Yi Increase"),
	43 => array("http://cafeausoul.com/iching/guai-determination","Guai Determination"),
	44 => array("http://cafeausoul.com/iching/gou-coming-meet","Gou Coming to Meet"),
	45 => array("http://cafeausoul.com/iching/cui-gathering-together","Cui Gathering Together"),
	46 => array("http://cafeausoul.com/iching/sheng-pushing-upward","Sheng Pushing Upward"),
	47 => array("http://cafeausoul.com/iching/kun-oppressionexhaustion","Kùn Oppression/Exhaustion"),
	48 => array("http://cafeausoul.com/iching/jing-well","Jing The Well"),
	49 => array("http://cafeausoul.com/iching/ko-moltingrevolution","Ko Molting/Revolution"),
	50 => array("http://cafeausoul.com/iching/ting-cauldron","Ting Cauldron"),
	51 => array("http://cafeausoul.com/iching/zhen-shocking","Zhen Shocking"),
	52 => array("http://cafeausoul.com/iching/ken-keeping-still","Ken Keeping Still"),
	53 => array("http://cafeausoul.com/iching/jian-development","Ji’an Development"),
	54 => array("http://cafeausoul.com/iching/kui-mei-propriety","Kui Mei Propriety"),
	55 => array("http://cafeausoul.com/iching/feng-abundance","Feng Abundance"),
	56 => array("http://cafeausoul.com/iching/lu-wanderer","Lu The Wanderer"),
	57 => array("http://cafeausoul.com/iching/xun-penetration","Xun Penetration"),
	58 => array("http://cafeausoul.com/iching/tui-joy","Tui Joy"),
	59 => array("http://cafeausoul.com/iching/huan-dispersion","Huan Dispersion"),
	60 => array("http://cafeausoul.com/iching/jie-limitation","Jie Limitation"),
	61 => array("http://cafeausoul.com/iching/zhong-fu-inner-truth","Zhong Fu Inner Truth"),
	62 => array("http://cafeausoul.com/iching/xiao-guo-small-exceeding","Xiao Guo Small Exceeding"),
	63 => array("http://cafeausoul.com/iching/chi-chi-after-completion","Chi Chi After Completion"),
	64 => array("http://cafeausoul.com/iching/wei-chi-completion","Wei Chi Before Completion"));


		return $cafeausoul_lookup[$n];
}

	function interpretHexagram($n) {



		$hexagram_lookup = array(
			1 => array("乾" , "qián", "Force", "the creative", "strong action", "the key", "god"),
			2 => array("坤" , "kūn", "Field", "the receptive", "acquiescence", "the flow"),
			3 => array("屯", "zhūn", "Sprouting", "difficulty at the beginning", "gathering support", "hoarding"),
			4 => array("蒙", "méng", "Enveloping", "youthful folly", "the young shoot", "discovering"),
			5 => array("需", "xū", "Attending", "waiting", "moistened", "arriving"),
			6 => array("訟", "sòng", "Arguing", "conflict", "lawsuit"),
			7 => array("師", "shī", "Leading", "the army"),
			8 => array("比", "bǐ", "Grouping", "holding together"),
			9 => array("小畜", "xiǎo chù", "Small Accumulating", "the taming power of the small"),
			10 => array("履", "lǚ", "Treading", "treading(conduct)"),
			11 => array("泰", "tài", "Pervading", "peace"),
			12 => array("否", "pǐ", "Obstruction", "standstill (stagnation)"),
			13 => array("同人", "tóng rén", "Concording People", "fellowship"),
			14 => array("大有", "dà yǒu", "Great Possessing", "possession in great measure"),
			15 => array("謙", "qiān", "Humbling", "modesty"),
			16 => array("豫", "yù", "Providing-For","enthusiasm"),
			17 => array("隨", "suí", "Following" , "following"),
			18 => array("蠱", "gǔ", "Correction", "work on what has been spoiled"),
			19 => array("臨", "lín", "Nearing", "approach", "the forest"),
			20 => array("觀", "guān", "Viewing", "contemplation (view)", "looking up"),
			21 => array("噬嗑", "shì kè", "Gnawing Bite", "biting through", "biting and chewing"),
			22 => array("賁", "bì", "Adorning", "grace", "luxuriance"),
			23 => array("剝", "bō", "Stripping", "splitting apart", "flaying"),
			24 => array("復", "fù", "Returning", "return (the turning point)"),
			25 => array("無妄", "wú wàng", "Without Embroiling"),
			26 => array("大畜", "dà chù", "Great Accumulating"),
			27 => array("頤", "yí", "Swallowing"),
			28 => array("大過", "dà guò", "Great Exceeding"),
			29 => array("坎", "kǎn", "Gorge"),
			30 => array("離", "lí", "Radiance"),
			31 => array("咸", "xián", "Conjoining"),
			32 => array("恆", "héng", "Persevering"),
			33 => array("遯", "dùn", "Retiring"),
			34 => array("大壯", "dà zhuàng", "Great Invigorating"),
			35 => array("晉", "jìn", "Prospering"),
			36 => array("明夷", "míng yí", "Darkening of the Light"),
			37 => array("家人", "jiā rén", "Dwelling People", "the family (the clan)", "family members"),
			38 => array("睽", "kuí", "Polarising", "opposition", "perversion"),
			39 => array("蹇", "jiǎn", "Limping", "obstruction", "afoot"),
			40 => array("解", "xiè", "Taking-Apart"),
			41 => array("損", "sǔn", "Diminishing"),
			42 => array("益", "yì", "Augmenting"),
			43 => array("夬", "guài", "Displacement"),
			44 => array("姤", "gòu", "Coupling"),
			45 => array("萃", "cuì", "Clustering"),
			46 => array("升", "shēng", "Ascending"),
			47 => array("困", "kùn", "Confining"),
			48 => array("井", "jǐng", "Welling"),
			49 => array("革", "gé", "Skinning", "revolution (molting)", "the bridle"),
			50 => array("鼎", "dǐng", "Holding"),
			51 => array("震", "zhèn", "Shake"),
			52 => array("艮", "gèn", "Bound"),
			53 => array("漸", "jiàn", "Infiltrating"),
			54 => array("歸妹", "guī mèi", "Converting the Maiden"),
			55 => array("豐", "fēng", "Abounding"),
			56 => array("旅", "lǚ", "Sojourning"),
			57 => array("巽", "xùn", "Ground", "the gentle (penetrating wind)", "calculations"),
			58 => array("兌", "duì", "Open"),
			59 => array("渙", "huàn", "Dispersing"),
			60 => array("節", "jié", "Articulating"),
			61 => array("中孚", "zhōng fú", "Center Returning", "inner truth", "central return"),
			62 => array("小過", "xiǎo guò", "Small Exceeding", "preponderance of the small", "small surpassing"),
			63 => array("既濟", "jì jì", "Already Fording", "after completion", "already completed"),
			64 => array("未濟", "wèi jì", "Not Yet Fording", "before completion", "not yet completed")
			);


		return $hexagram_lookup[$n];
}


        function hexagramLookup($lower_trigram,$upper_trigram) {
                // upper then lower
                $hexagram_number_lookup = array('Chien' => array('Chien' => 1, 'Tui'=>10, 'Li'=> 13, 'Chen'=>25, 'Sun' => 44, 'Kan' =>6, 'Ken'=>33, 'Kun' =>12), 
                'Tui' => array('Chien' => 43, 'Tui'=>58, 'Li'=> 49, 'Chen'=>17, 'Sun' => 28, 'Kan' => 47, 'Ken'=>31, 'Kun' => 45),
                'Li' => array('Chien' => 14, 'Tui'=>38, 'Li'=> 30, 'Chen'=>21, 'Sun' => 50, 'Kan' => 64, 'Ken'=>56, 'Kun' => 35),
                'Chen' => array('Chien' => 34, 'Tui'=> 54, 'Li'=> 55, 'Chen'=> 51, 'Sun' => 32, 'Kan' => 40, 'Ken'=> 62, 'Kun' => 16),
                'Sun' => array('Chien' => 9, 'Tui'=> 61, 'Li'=> 37, 'Chen'=> 42, 'Sun' => 57, 'Kan' => 59, 'Ken'=> 53, 'Kun' => 20),
                'Kan' => array('Chien' => 5, 'Tui'=> 60, 'Li'=> 63, 'Chen'=> 3, 'Sun' => 48, 'Kan' => 29, 'Ken'=> 39, 'Kun' => 8),
                'Ken' => array('Chien' => 26, 'Tui'=> 41, 'Li'=> 22, 'Chen'=> 27, 'Sun' => 18, 'Kan' => 4, 'Ken'=> 52, 'Kun' => 23),
                'Kun' => array('Chien' => 11, 'Tui'=> 19, 'Li'=> 36, 'Chen'=> 24, 'Sun' => 46, 'Kan' => 7, 'Ken'=> 15, 'Kun' => 2));

		// https://en.wikipedia.org/wiki/List_of_hexagrams_of_the_I_Ching

//var_dump($lower_trigram);
//                $this->hexagram_number = $hexagram_number_lookup[$upper_trigram[1]][$lower_trigram[1]];

		$u = $upper_trigram[1];
		$l = $lower_trigram[1];
//echo "." . $u . '_' . $l . ".";

		$this->hexagram_number = $hexagram_number_lookup[$u][$l];

                return $this->hexagram_number;
        }


	function hexagramGenerator() {

		$upper_trigram = $this->trigramGenerator();
		$lower_trigram = $this->trigramGenerator();



          	$hexagram_number = $this->hexagramLookup( $lower_trigram['trigram'] , $upper_trigram['trigram'] );

		$hexagram = $this->interpretHexagram($hexagram_number);

		$this->reading = $lower_trigram['reading'] . $upper_trigram['reading'];

//echo $this->reading;
//exit();

		return $this->reading;
		//return array("hexagram"=>$hexagram_number, "upper"=>$upper_trigram, "lower"=>$lower_trigram, "hexagram text"=>$hexagram);
	}


function libraryEmoji () {

$this->emoji_reference = 
'# emoji-data.txt
# Date: 2017-06-19, 11:13:24 GMT
# © 2017 Unicode®, Inc.
# Unicode and the Unicode Logo are registered trademarks of Unicode, Inc. in the U.S. and other countries.
# For terms of use, see http://www.unicode.org/terms_of_use.html
#
# Emoji Data for UTR #51
# Version: 5.0
#
# For documentation and usage, see http://www.unicode.org/reports/tr51
#
# Warning: the format has changed from Version 1.0
# Format: 
# codepoint(s) ; property(=Yes) # comments 
#
# Characters and sequences are listed in code point order. Users should be shown a more natural order.
# See the CLDR collation order for Emoji.


# ================================================

# All omitted code points have Emoji=No 
# @missing: 0000..10FFFF  ; Emoji ; No

0023          ; Emoji                #  1.1  [1] (#️)       number sign
002A          ; Emoji                #  1.1  [1] (*️)       asterisk
0030..0039    ; Emoji                #  1.1 [10] (0️..9️)    digit zero..digit nine
00A9          ; Emoji                #  1.1  [1] (©️)       copyright
00AE          ; Emoji                #  1.1  [1] (®️)       registered
203C          ; Emoji                #  1.1  [1] (‼️)       double exclamation mark
2049          ; Emoji                #  3.0  [1] (⁉️)       exclamation question mark
2122          ; Emoji                #  1.1  [1] (™️)       trade mark
2139          ; Emoji                #  3.0  [1] (ℹ️)       information
2194..2199    ; Emoji                #  1.1  [6] (↔️..↙️)    left-right arrow..down-left arrow
21A9..21AA    ; Emoji                #  1.1  [2] (↩️..↪️)    right arrow curving left..left arrow curving right
231A..231B    ; Emoji                #  1.1  [2] (⌚..⌛)    watch..hourglass done
2328          ; Emoji                #  1.1  [1] (⌨️)       keyboard
23CF          ; Emoji                #  4.0  [1] (⏏️)       eject button
23E9..23F3    ; Emoji                #  6.0 [11] (⏩..⏳)    fast-forward button..hourglass not done
23F8..23FA    ; Emoji                #  7.0  [3] (⏸️..⏺️)    pause button..record button
24C2          ; Emoji                #  1.1  [1] (Ⓜ️)       circled M
25AA..25AB    ; Emoji                #  1.1  [2] (▪️..▫️)    black small square..white small square
25B6          ; Emoji                #  1.1  [1] (▶️)       play button
25C0          ; Emoji                #  1.1  [1] (◀️)       reverse button
25FB..25FE    ; Emoji                #  3.2  [4] (◻️..◾)    white medium square..black medium-small square
2600..2604    ; Emoji                #  1.1  [5] (☀️..☄️)    sun..comet
260E          ; Emoji                #  1.1  [1] (☎️)       telephone
2611          ; Emoji                #  1.1  [1] (☑️)       ballot box with check
2614..2615    ; Emoji                #  4.0  [2] (☔..☕)    umbrella with rain drops..hot beverage
2618          ; Emoji                #  4.1  [1] (☘️)       shamrock
261D          ; Emoji                #  1.1  [1] (☝️)       index pointing up
2620          ; Emoji                #  1.1  [1] (☠️)       skull and crossbones
2622..2623    ; Emoji                #  1.1  [2] (☢️..☣️)    radioactive..biohazard
2626          ; Emoji                #  1.1  [1] (☦️)       orthodox cross
262A          ; Emoji                #  1.1  [1] (☪️)       star and crescent
262E..262F    ; Emoji                #  1.1  [2] (☮️..☯️)    peace symbol..yin yang
2638..263A    ; Emoji                #  1.1  [3] (☸️..☺️)    wheel of dharma..smiling face
2640          ; Emoji                #  1.1  [1] (♀️)       female sign
2642          ; Emoji                #  1.1  [1] (♂️)       male sign
2648..2653    ; Emoji                #  1.1 [12] (♈..♓)    Aries..Pisces
2660          ; Emoji                #  1.1  [1] (♠️)       spade suit
2663          ; Emoji                #  1.1  [1] (♣️)       club suit
2665..2666    ; Emoji                #  1.1  [2] (♥️..♦️)    heart suit..diamond suit
2668          ; Emoji                #  1.1  [1] (♨️)       hot springs
267B          ; Emoji                #  3.2  [1] (♻️)       recycling symbol
267F          ; Emoji                #  4.1  [1] (♿)       wheelchair symbol
2692..2697    ; Emoji                #  4.1  [6] (⚒️..⚗️)    hammer and pick..alembic
2699          ; Emoji                #  4.1  [1] (⚙️)       gear
269B..269C    ; Emoji                #  4.1  [2] (⚛️..⚜️)    atom symbol..fleur-de-lis
26A0..26A1    ; Emoji                #  4.0  [2] (⚠️..⚡)    warning..high voltage
26AA..26AB    ; Emoji                #  4.1  [2] (⚪..⚫)    white circle..black circle
26B0..26B1    ; Emoji                #  4.1  [2] (⚰️..⚱️)    coffin..funeral urn
26BD..26BE    ; Emoji                #  5.2  [2] (⚽..⚾)    soccer ball..baseball
26C4..26C5    ; Emoji                #  5.2  [2] (⛄..⛅)    snowman without snow..sun behind cloud
26C8          ; Emoji                #  5.2  [1] (⛈️)       cloud with lightning and rain
26CE          ; Emoji                #  6.0  [1] (⛎)       Ophiuchus
26CF          ; Emoji                #  5.2  [1] (⛏️)       pick
26D1          ; Emoji                #  5.2  [1] (⛑️)       rescue worker’s helmet
26D3..26D4    ; Emoji                #  5.2  [2] (⛓️..⛔)    chains..no entry
26E9..26EA    ; Emoji                #  5.2  [2] (⛩️..⛪)    shinto shrine..church
26F0..26F5    ; Emoji                #  5.2  [6] (⛰️..⛵)    mountain..sailboat
26F7..26FA    ; Emoji                #  5.2  [4] (⛷️..⛺)    skier..tent
26FD          ; Emoji                #  5.2  [1] (⛽)       fuel pump
2702          ; Emoji                #  1.1  [1] (✂️)       scissors
2705          ; Emoji                #  6.0  [1] (✅)       white heavy check mark
2708..2709    ; Emoji                #  1.1  [2] (✈️..✉️)    airplane..envelope
270A..270B    ; Emoji                #  6.0  [2] (✊..✋)    raised fist..raised hand
270C..270D    ; Emoji                #  1.1  [2] (✌️..✍️)    victory hand..writing hand
270F          ; Emoji                #  1.1  [1] (✏️)       pencil
2712          ; Emoji                #  1.1  [1] (✒️)       black nib
2714          ; Emoji                #  1.1  [1] (✔️)       heavy check mark
2716          ; Emoji                #  1.1  [1] (✖️)       heavy multiplication x
271D          ; Emoji                #  1.1  [1] (✝️)       latin cross
2721          ; Emoji                #  1.1  [1] (✡️)       star of David
2728          ; Emoji                #  6.0  [1] (✨)       sparkles
2733..2734    ; Emoji                #  1.1  [2] (✳️..✴️)    eight-spoked asterisk..eight-pointed star
2744          ; Emoji                #  1.1  [1] (❄️)       snowflake
2747          ; Emoji                #  1.1  [1] (❇️)       sparkle
274C          ; Emoji                #  6.0  [1] (❌)       cross mark
274E          ; Emoji                #  6.0  [1] (❎)       cross mark button
2753..2755    ; Emoji                #  6.0  [3] (❓..❕)    question mark..white exclamation mark
2757          ; Emoji                #  5.2  [1] (❗)       exclamation mark
2763..2764    ; Emoji                #  1.1  [2] (❣️..❤️)    heavy heart exclamation..red heart
2795..2797    ; Emoji                #  6.0  [3] (➕..➗)    heavy plus sign..heavy division sign
27A1          ; Emoji                #  1.1  [1] (➡️)       right arrow
27B0          ; Emoji                #  6.0  [1] (➰)       curly loop
27BF          ; Emoji                #  6.0  [1] (➿)       double curly loop
2934..2935    ; Emoji                #  3.2  [2] (⤴️..⤵️)    right arrow curving up..right arrow curving down
2B05..2B07    ; Emoji                #  4.0  [3] (⬅️..⬇️)    left arrow..down arrow
2B1B..2B1C    ; Emoji                #  5.1  [2] (⬛..⬜)    black large square..white large square
2B50          ; Emoji                #  5.1  [1] (⭐)       white medium star
2B55          ; Emoji                #  5.2  [1] (⭕)       heavy large circle
3030          ; Emoji                #  1.1  [1] (〰️)       wavy dash
303D          ; Emoji                #  3.2  [1] (〽️)       part alternation mark
3297          ; Emoji                #  1.1  [1] (㊗️)       Japanese “congratulations” button
3299          ; Emoji                #  1.1  [1] (㊙️)       Japanese “secret” button
1F004         ; Emoji                #  5.1  [1] (🀄)       mahjong red dragon
1F0CF         ; Emoji                #  6.0  [1] (🃏)       joker
1F170..1F171  ; Emoji                #  6.0  [2] (🅰️..🅱️)    A button (blood type)..B button (blood type)
1F17E         ; Emoji                #  6.0  [1] (🅾️)       O button (blood type)
1F17F         ; Emoji                #  5.2  [1] (🅿️)       P button
1F18E         ; Emoji                #  6.0  [1] (🆎)       AB button (blood type)
1F191..1F19A  ; Emoji                #  6.0 [10] (🆑..🆚)    CL button..VS button
1F1E6..1F1FF  ; Emoji                #  6.0 [26] (🇦..🇿)    regional indicator symbol letter a..regional indicator symbol letter z
1F201..1F202  ; Emoji                #  6.0  [2] (🈁..🈂️)    Japanese “here” button..Japanese “service charge” button
1F21A         ; Emoji                #  5.2  [1] (🈚)       Japanese “free of charge” button
1F22F         ; Emoji                #  5.2  [1] (🈯)       Japanese “reserved” button
1F232..1F23A  ; Emoji                #  6.0  [9] (🈲..🈺)    Japanese “prohibited” button..Japanese “open for business” button
1F250..1F251  ; Emoji                #  6.0  [2] (🉐..🉑)    Japanese “bargain” button..Japanese “acceptable” button
1F300..1F320  ; Emoji                #  6.0 [33] (🌀..🌠)    cyclone..shooting star
1F321         ; Emoji                #  7.0  [1] (🌡️)       thermometer
1F324..1F32C  ; Emoji                #  7.0  [9] (🌤️..🌬️)    sun behind small cloud..wind face
1F32D..1F32F  ; Emoji                #  8.0  [3] (🌭..🌯)    hot dog..burrito
1F330..1F335  ; Emoji                #  6.0  [6] (🌰..🌵)    chestnut..cactus
1F336         ; Emoji                #  7.0  [1] (🌶️)       hot pepper
1F337..1F37C  ; Emoji                #  6.0 [70] (🌷..🍼)    tulip..baby bottle
1F37D         ; Emoji                #  7.0  [1] (🍽️)       fork and knife with plate
1F37E..1F37F  ; Emoji                #  8.0  [2] (🍾..🍿)    bottle with popping cork..popcorn
1F380..1F393  ; Emoji                #  6.0 [20] (🎀..🎓)    ribbon..graduation cap
1F396..1F397  ; Emoji                #  7.0  [2] (🎖️..🎗️)    military medal..reminder ribbon
1F399..1F39B  ; Emoji                #  7.0  [3] (🎙️..🎛️)    studio microphone..control knobs
1F39E..1F39F  ; Emoji                #  7.0  [2] (🎞️..🎟️)    film frames..admission tickets
1F3A0..1F3C4  ; Emoji                #  6.0 [37] (🎠..🏄)    carousel horse..person surfing
1F3C5         ; Emoji                #  7.0  [1] (🏅)       sports medal
1F3C6..1F3CA  ; Emoji                #  6.0  [5] (🏆..🏊)    trophy..person swimming
1F3CB..1F3CE  ; Emoji                #  7.0  [4] (🏋️..🏎️)    person lifting weights..racing car
1F3CF..1F3D3  ; Emoji                #  8.0  [5] (🏏..🏓)    cricket game..ping pong
1F3D4..1F3DF  ; Emoji                #  7.0 [12] (🏔️..🏟️)    snow-capped mountain..stadium
1F3E0..1F3F0  ; Emoji                #  6.0 [17] (🏠..🏰)    house..castle
1F3F3..1F3F5  ; Emoji                #  7.0  [3] (🏳️..🏵️)    white flag..rosette
1F3F7         ; Emoji                #  7.0  [1] (🏷️)       label
1F3F8..1F3FF  ; Emoji                #  8.0  [8] (🏸..🏿)    badminton..dark skin tone
1F400..1F43E  ; Emoji                #  6.0 [63] (🐀..🐾)    rat..paw prints
1F43F         ; Emoji                #  7.0  [1] (🐿️)       chipmunk
1F440         ; Emoji                #  6.0  [1] (👀)       eyes
1F441         ; Emoji                #  7.0  [1] (👁️)       eye
1F442..1F4F7  ; Emoji                #  6.0[182] (👂..📷)    ear..camera
1F4F8         ; Emoji                #  7.0  [1] (📸)       camera with flash
1F4F9..1F4FC  ; Emoji                #  6.0  [4] (📹..📼)    video camera..videocassette
1F4FD         ; Emoji                #  7.0  [1] (📽️)       film projector
1F4FF         ; Emoji                #  8.0  [1] (📿)       prayer beads
1F500..1F53D  ; Emoji                #  6.0 [62] (🔀..🔽)    shuffle tracks button..down button
1F549..1F54A  ; Emoji                #  7.0  [2] (🕉️..🕊️)    om..dove
1F54B..1F54E  ; Emoji                #  8.0  [4] (🕋..🕎)    kaaba..menorah
1F550..1F567  ; Emoji                #  6.0 [24] (🕐..🕧)    one o’clock..twelve-thirty
1F56F..1F570  ; Emoji                #  7.0  [2] (🕯️..🕰️)    candle..mantelpiece clock
1F573..1F579  ; Emoji                #  7.0  [7] (🕳️..🕹️)    hole..joystick
1F57A         ; Emoji                #  9.0  [1] (🕺)       man dancing
1F587         ; Emoji                #  7.0  [1] (🖇️)       linked paperclips
1F58A..1F58D  ; Emoji                #  7.0  [4] (🖊️..🖍️)    pen..crayon
1F590         ; Emoji                #  7.0  [1] (🖐️)       hand with fingers splayed
1F595..1F596  ; Emoji                #  7.0  [2] (🖕..🖖)    middle finger..vulcan salute
1F5A4         ; Emoji                #  9.0  [1] (🖤)       black heart
1F5A5         ; Emoji                #  7.0  [1] (🖥️)       desktop computer
1F5A8         ; Emoji                #  7.0  [1] (🖨️)       printer
1F5B1..1F5B2  ; Emoji                #  7.0  [2] (🖱️..🖲️)    computer mouse..trackball
1F5BC         ; Emoji                #  7.0  [1] (🖼️)       framed picture
1F5C2..1F5C4  ; Emoji                #  7.0  [3] (🗂️..🗄️)    card index dividers..file cabinet
1F5D1..1F5D3  ; Emoji                #  7.0  [3] (🗑️..🗓️)    wastebasket..spiral calendar
1F5DC..1F5DE  ; Emoji                #  7.0  [3] (🗜️..🗞️)    clamp..rolled-up newspaper
1F5E1         ; Emoji                #  7.0  [1] (🗡️)       dagger
1F5E3         ; Emoji                #  7.0  [1] (🗣️)       speaking head
1F5E8         ; Emoji                #  7.0  [1] (🗨️)       left speech bubble
1F5EF         ; Emoji                #  7.0  [1] (🗯️)       right anger bubble
1F5F3         ; Emoji                #  7.0  [1] (🗳️)       ballot box with ballot
1F5FA         ; Emoji                #  7.0  [1] (🗺️)       world map
1F5FB..1F5FF  ; Emoji                #  6.0  [5] (🗻..🗿)    mount fuji..moai
1F600         ; Emoji                #  6.1  [1] (😀)       grinning face
1F601..1F610  ; Emoji                #  6.0 [16] (😁..😐)    beaming face with smiling eyes..neutral face
1F611         ; Emoji                #  6.1  [1] (😑)       expressionless face
1F612..1F614  ; Emoji                #  6.0  [3] (😒..😔)    unamused face..pensive face
1F615         ; Emoji                #  6.1  [1] (😕)       confused face
1F616         ; Emoji                #  6.0  [1] (😖)       confounded face
1F617         ; Emoji                #  6.1  [1] (😗)       kissing face
1F618         ; Emoji                #  6.0  [1] (😘)       face blowing a kiss
1F619         ; Emoji                #  6.1  [1] (😙)       kissing face with smiling eyes
1F61A         ; Emoji                #  6.0  [1] (😚)       kissing face with closed eyes
1F61B         ; Emoji                #  6.1  [1] (😛)       face with tongue
1F61C..1F61E  ; Emoji                #  6.0  [3] (😜..😞)    winking face with tongue..disappointed face
1F61F         ; Emoji                #  6.1  [1] (😟)       worried face
1F620..1F625  ; Emoji                #  6.0  [6] (😠..😥)    angry face..sad but relieved face
1F626..1F627  ; Emoji                #  6.1  [2] (😦..😧)    frowning face with open mouth..anguished face
1F628..1F62B  ; Emoji                #  6.0  [4] (😨..😫)    fearful face..tired face
1F62C         ; Emoji                #  6.1  [1] (😬)       grimacing face
1F62D         ; Emoji                #  6.0  [1] (😭)       loudly crying face
1F62E..1F62F  ; Emoji                #  6.1  [2] (😮..😯)    face with open mouth..hushed face
1F630..1F633  ; Emoji                #  6.0  [4] (😰..😳)    anxious face with sweat..flushed face
1F634         ; Emoji                #  6.1  [1] (😴)       sleeping face
1F635..1F640  ; Emoji                #  6.0 [12] (😵..🙀)    dizzy face..weary cat face
1F641..1F642  ; Emoji                #  7.0  [2] (🙁..🙂)    slightly frowning face..slightly smiling face
1F643..1F644  ; Emoji                #  8.0  [2] (🙃..🙄)    upside-down face..face with rolling eyes
1F645..1F64F  ; Emoji                #  6.0 [11] (🙅..🙏)    person gesturing NO..folded hands
1F680..1F6C5  ; Emoji                #  6.0 [70] (🚀..🛅)    rocket..left luggage
1F6CB..1F6CF  ; Emoji                #  7.0  [5] (🛋️..🛏️)    couch and lamp..bed
1F6D0         ; Emoji                #  8.0  [1] (🛐)       place of worship
1F6D1..1F6D2  ; Emoji                #  9.0  [2] (🛑..🛒)    stop sign..shopping cart
1F6E0..1F6E5  ; Emoji                #  7.0  [6] (🛠️..🛥️)    hammer and wrench..motor boat
1F6E9         ; Emoji                #  7.0  [1] (🛩️)       small airplane
1F6EB..1F6EC  ; Emoji                #  7.0  [2] (🛫..🛬)    airplane departure..airplane arrival
1F6F0         ; Emoji                #  7.0  [1] (🛰️)       satellite
1F6F3         ; Emoji                #  7.0  [1] (🛳️)       passenger ship
1F6F4..1F6F6  ; Emoji                #  9.0  [3] (🛴..🛶)    kick scooter..canoe
1F6F7..1F6F8  ; Emoji                # 10.0  [2] (🛷..🛸)    sled..flying saucer
1F910..1F918  ; Emoji                #  8.0  [9] (🤐..🤘)    zipper-mouth face..sign of the horns
1F919..1F91E  ; Emoji                #  9.0  [6] (🤙..🤞)    call me hand..crossed fingers
1F91F         ; Emoji                # 10.0  [1] (🤟)       love-you gesture
1F920..1F927  ; Emoji                #  9.0  [8] (🤠..🤧)    cowboy hat face..sneezing face
1F928..1F92F  ; Emoji                # 10.0  [8] (🤨..🤯)    face with raised eyebrow..exploding head
1F930         ; Emoji                #  9.0  [1] (🤰)       pregnant woman
1F931..1F932  ; Emoji                # 10.0  [2] (🤱..🤲)    breast-feeding..palms up together
1F933..1F93A  ; Emoji                #  9.0  [8] (🤳..🤺)    selfie..person fencing
1F93C..1F93E  ; Emoji                #  9.0  [3] (🤼..🤾)    people wrestling..person playing handball
1F940..1F945  ; Emoji                #  9.0  [6] (🥀..🥅)    wilted flower..goal net
1F947..1F94B  ; Emoji                #  9.0  [5] (🥇..🥋)    1st place medal..martial arts uniform
1F94C         ; Emoji                # 10.0  [1] (🥌)       curling stone
1F950..1F95E  ; Emoji                #  9.0 [15] (🥐..🥞)    croissant..pancakes
1F95F..1F96B  ; Emoji                # 10.0 [13] (🥟..🥫)    dumpling..canned food
1F980..1F984  ; Emoji                #  8.0  [5] (🦀..🦄)    crab..unicorn face
1F985..1F991  ; Emoji                #  9.0 [13] (🦅..🦑)    eagle..squid
1F992..1F997  ; Emoji                # 10.0  [6] (🦒..🦗)    giraffe..cricket
1F9C0         ; Emoji                #  8.0  [1] (🧀)       cheese wedge
1F9D0..1F9E6  ; Emoji                # 10.0 [23] (🧐..🧦)    face with monocle..socks

# Total elements: 1182

# ================================================

# All omitted code points have Emoji_Presentation=No 
# @missing: 0000..10FFFF  ; Emoji_Presentation ; No

231A..231B    ; Emoji_Presentation   #  1.1  [2] (⌚..⌛)    watch..hourglass done
23E9..23EC    ; Emoji_Presentation   #  6.0  [4] (⏩..⏬)    fast-forward button..fast down button
23F0          ; Emoji_Presentation   #  6.0  [1] (⏰)       alarm clock
23F3          ; Emoji_Presentation   #  6.0  [1] (⏳)       hourglass not done
25FD..25FE    ; Emoji_Presentation   #  3.2  [2] (◽..◾)    white medium-small square..black medium-small square
2614..2615    ; Emoji_Presentation   #  4.0  [2] (☔..☕)    umbrella with rain drops..hot beverage
2648..2653    ; Emoji_Presentation   #  1.1 [12] (♈..♓)    Aries..Pisces
267F          ; Emoji_Presentation   #  4.1  [1] (♿)       wheelchair symbol
2693          ; Emoji_Presentation   #  4.1  [1] (⚓)       anchor
26A1          ; Emoji_Presentation   #  4.0  [1] (⚡)       high voltage
26AA..26AB    ; Emoji_Presentation   #  4.1  [2] (⚪..⚫)    white circle..black circle
26BD..26BE    ; Emoji_Presentation   #  5.2  [2] (⚽..⚾)    soccer ball..baseball
26C4..26C5    ; Emoji_Presentation   #  5.2  [2] (⛄..⛅)    snowman without snow..sun behind cloud
26CE          ; Emoji_Presentation   #  6.0  [1] (⛎)       Ophiuchus
26D4          ; Emoji_Presentation   #  5.2  [1] (⛔)       no entry
26EA          ; Emoji_Presentation   #  5.2  [1] (⛪)       church
26F2..26F3    ; Emoji_Presentation   #  5.2  [2] (⛲..⛳)    fountain..flag in hole
26F5          ; Emoji_Presentation   #  5.2  [1] (⛵)       sailboat
26FA          ; Emoji_Presentation   #  5.2  [1] (⛺)       tent
26FD          ; Emoji_Presentation   #  5.2  [1] (⛽)       fuel pump
2705          ; Emoji_Presentation   #  6.0  [1] (✅)       white heavy check mark
270A..270B    ; Emoji_Presentation   #  6.0  [2] (✊..✋)    raised fist..raised hand
2728          ; Emoji_Presentation   #  6.0  [1] (✨)       sparkles
274C          ; Emoji_Presentation   #  6.0  [1] (❌)       cross mark
274E          ; Emoji_Presentation   #  6.0  [1] (❎)       cross mark button
2753..2755    ; Emoji_Presentation   #  6.0  [3] (❓..❕)    question mark..white exclamation mark
2757          ; Emoji_Presentation   #  5.2  [1] (❗)       exclamation mark
2795..2797    ; Emoji_Presentation   #  6.0  [3] (➕..➗)    heavy plus sign..heavy division sign
27B0          ; Emoji_Presentation   #  6.0  [1] (➰)       curly loop
27BF          ; Emoji_Presentation   #  6.0  [1] (➿)       double curly loop
2B1B..2B1C    ; Emoji_Presentation   #  5.1  [2] (⬛..⬜)    black large square..white large square
2B50          ; Emoji_Presentation   #  5.1  [1] (⭐)       white medium star
2B55          ; Emoji_Presentation   #  5.2  [1] (⭕)       heavy large circle
1F004         ; Emoji_Presentation   #  5.1  [1] (🀄)       mahjong red dragon
1F0CF         ; Emoji_Presentation   #  6.0  [1] (🃏)       joker
1F18E         ; Emoji_Presentation   #  6.0  [1] (🆎)       AB button (blood type)
1F191..1F19A  ; Emoji_Presentation   #  6.0 [10] (🆑..🆚)    CL button..VS button
1F1E6..1F1FF  ; Emoji_Presentation   #  6.0 [26] (🇦..🇿)    regional indicator symbol letter a..regional indicator symbol letter z
1F201         ; Emoji_Presentation   #  6.0  [1] (🈁)       Japanese “here” button
1F21A         ; Emoji_Presentation   #  5.2  [1] (🈚)       Japanese “free of charge” button
1F22F         ; Emoji_Presentation   #  5.2  [1] (🈯)       Japanese “reserved” button
1F232..1F236  ; Emoji_Presentation   #  6.0  [5] (🈲..🈶)    Japanese “prohibited” button..Japanese “not free of charge” button
1F238..1F23A  ; Emoji_Presentation   #  6.0  [3] (🈸..🈺)    Japanese “application” button..Japanese “open for business” button
1F250..1F251  ; Emoji_Presentation   #  6.0  [2] (🉐..🉑)    Japanese “bargain” button..Japanese “acceptable” button
1F300..1F320  ; Emoji_Presentation   #  6.0 [33] (🌀..🌠)    cyclone..shooting star
1F32D..1F32F  ; Emoji_Presentation   #  8.0  [3] (🌭..🌯)    hot dog..burrito
1F330..1F335  ; Emoji_Presentation   #  6.0  [6] (🌰..🌵)    chestnut..cactus
1F337..1F37C  ; Emoji_Presentation   #  6.0 [70] (🌷..🍼)    tulip..baby bottle
1F37E..1F37F  ; Emoji_Presentation   #  8.0  [2] (🍾..🍿)    bottle with popping cork..popcorn
1F380..1F393  ; Emoji_Presentation   #  6.0 [20] (🎀..🎓)    ribbon..graduation cap
1F3A0..1F3C4  ; Emoji_Presentation   #  6.0 [37] (🎠..🏄)    carousel horse..person surfing
1F3C5         ; Emoji_Presentation   #  7.0  [1] (🏅)       sports medal
1F3C6..1F3CA  ; Emoji_Presentation   #  6.0  [5] (🏆..🏊)    trophy..person swimming
1F3CF..1F3D3  ; Emoji_Presentation   #  8.0  [5] (🏏..🏓)    cricket game..ping pong
1F3E0..1F3F0  ; Emoji_Presentation   #  6.0 [17] (🏠..🏰)    house..castle
1F3F4         ; Emoji_Presentation   #  7.0  [1] (🏴)       black flag
1F3F8..1F3FF  ; Emoji_Presentation   #  8.0  [8] (🏸..🏿)    badminton..dark skin tone
1F400..1F43E  ; Emoji_Presentation   #  6.0 [63] (🐀..🐾)    rat..paw prints
1F440         ; Emoji_Presentation   #  6.0  [1] (👀)       eyes
1F442..1F4F7  ; Emoji_Presentation   #  6.0[182] (👂..📷)    ear..camera
1F4F8         ; Emoji_Presentation   #  7.0  [1] (📸)       camera with flash
1F4F9..1F4FC  ; Emoji_Presentation   #  6.0  [4] (📹..📼)    video camera..videocassette
1F4FF         ; Emoji_Presentation   #  8.0  [1] (📿)       prayer beads
1F500..1F53D  ; Emoji_Presentation   #  6.0 [62] (🔀..🔽)    shuffle tracks button..down button
1F54B..1F54E  ; Emoji_Presentation   #  8.0  [4] (🕋..🕎)    kaaba..menorah
1F550..1F567  ; Emoji_Presentation   #  6.0 [24] (🕐..🕧)    one o’clock..twelve-thirty
1F57A         ; Emoji_Presentation   #  9.0  [1] (🕺)       man dancing
1F595..1F596  ; Emoji_Presentation   #  7.0  [2] (🖕..🖖)    middle finger..vulcan salute
1F5A4         ; Emoji_Presentation   #  9.0  [1] (🖤)       black heart
1F5FB..1F5FF  ; Emoji_Presentation   #  6.0  [5] (🗻..🗿)    mount fuji..moai
1F600         ; Emoji_Presentation   #  6.1  [1] (😀)       grinning face
1F601..1F610  ; Emoji_Presentation   #  6.0 [16] (😁..😐)    beaming face with smiling eyes..neutral face
1F611         ; Emoji_Presentation   #  6.1  [1] (😑)       expressionless face
1F612..1F614  ; Emoji_Presentation   #  6.0  [3] (😒..😔)    unamused face..pensive face
1F615         ; Emoji_Presentation   #  6.1  [1] (😕)       confused face
1F616         ; Emoji_Presentation   #  6.0  [1] (😖)       confounded face
1F617         ; Emoji_Presentation   #  6.1  [1] (😗)       kissing face
1F618         ; Emoji_Presentation   #  6.0  [1] (😘)       face blowing a kiss
1F619         ; Emoji_Presentation   #  6.1  [1] (😙)       kissing face with smiling eyes
1F61A         ; Emoji_Presentation   #  6.0  [1] (😚)       kissing face with closed eyes
1F61B         ; Emoji_Presentation   #  6.1  [1] (😛)       face with tongue
1F61C..1F61E  ; Emoji_Presentation   #  6.0  [3] (😜..😞)    winking face with tongue..disappointed face
1F61F         ; Emoji_Presentation   #  6.1  [1] (😟)       worried face
1F620..1F625  ; Emoji_Presentation   #  6.0  [6] (😠..😥)    angry face..sad but relieved face
1F626..1F627  ; Emoji_Presentation   #  6.1  [2] (😦..😧)    frowning face with open mouth..anguished face
1F628..1F62B  ; Emoji_Presentation   #  6.0  [4] (😨..😫)    fearful face..tired face
1F62C         ; Emoji_Presentation   #  6.1  [1] (😬)       grimacing face
1F62D         ; Emoji_Presentation   #  6.0  [1] (😭)       loudly crying face
1F62E..1F62F  ; Emoji_Presentation   #  6.1  [2] (😮..😯)    face with open mouth..hushed face
1F630..1F633  ; Emoji_Presentation   #  6.0  [4] (😰..😳)    anxious face with sweat..flushed face
1F634         ; Emoji_Presentation   #  6.1  [1] (😴)       sleeping face
1F635..1F640  ; Emoji_Presentation   #  6.0 [12] (😵..🙀)    dizzy face..weary cat face
1F641..1F642  ; Emoji_Presentation   #  7.0  [2] (🙁..🙂)    slightly frowning face..slightly smiling face
1F643..1F644  ; Emoji_Presentation   #  8.0  [2] (🙃..🙄)    upside-down face..face with rolling eyes
1F645..1F64F  ; Emoji_Presentation   #  6.0 [11] (🙅..🙏)    person gesturing NO..folded hands
1F680..1F6C5  ; Emoji_Presentation   #  6.0 [70] (🚀..🛅)    rocket..left luggage
1F6CC         ; Emoji_Presentation   #  7.0  [1] (🛌)       person in bed
1F6D0         ; Emoji_Presentation   #  8.0  [1] (🛐)       place of worship
1F6D1..1F6D2  ; Emoji_Presentation   #  9.0  [2] (🛑..🛒)    stop sign..shopping cart
1F6EB..1F6EC  ; Emoji_Presentation   #  7.0  [2] (🛫..🛬)    airplane departure..airplane arrival
1F6F4..1F6F6  ; Emoji_Presentation   #  9.0  [3] (🛴..🛶)    kick scooter..canoe
1F6F7..1F6F8  ; Emoji_Presentation   # 10.0  [2] (🛷..🛸)    sled..flying saucer
1F910..1F918  ; Emoji_Presentation   #  8.0  [9] (🤐..🤘)    zipper-mouth face..sign of the horns
1F919..1F91E  ; Emoji_Presentation   #  9.0  [6] (🤙..🤞)    call me hand..crossed fingers
1F91F         ; Emoji_Presentation   # 10.0  [1] (🤟)       love-you gesture
1F920..1F927  ; Emoji_Presentation   #  9.0  [8] (🤠..🤧)    cowboy hat face..sneezing face
1F928..1F92F  ; Emoji_Presentation   # 10.0  [8] (🤨..🤯)    face with raised eyebrow..exploding head
1F930         ; Emoji_Presentation   #  9.0  [1] (🤰)       pregnant woman
1F931..1F932  ; Emoji_Presentation   # 10.0  [2] (🤱..🤲)    breast-feeding..palms up together
1F933..1F93A  ; Emoji_Presentation   #  9.0  [8] (🤳..🤺)    selfie..person fencing
1F93C..1F93E  ; Emoji_Presentation   #  9.0  [3] (🤼..🤾)    people wrestling..person playing handball
1F940..1F945  ; Emoji_Presentation   #  9.0  [6] (🥀..🥅)    wilted flower..goal net
1F947..1F94B  ; Emoji_Presentation   #  9.0  [5] (🥇..🥋)    1st place medal..martial arts uniform
1F94C         ; Emoji_Presentation   # 10.0  [1] (🥌)       curling stone
1F950..1F95E  ; Emoji_Presentation   #  9.0 [15] (🥐..🥞)    croissant..pancakes
1F95F..1F96B  ; Emoji_Presentation   # 10.0 [13] (🥟..🥫)    dumpling..canned food
1F980..1F984  ; Emoji_Presentation   #  8.0  [5] (🦀..🦄)    crab..unicorn face
1F985..1F991  ; Emoji_Presentation   #  9.0 [13] (🦅..🦑)    eagle..squid
1F992..1F997  ; Emoji_Presentation   # 10.0  [6] (🦒..🦗)    giraffe..cricket
1F9C0         ; Emoji_Presentation   #  8.0  [1] (🧀)       cheese wedge
1F9D0..1F9E6  ; Emoji_Presentation   # 10.0 [23] (🧐..🧦)    face with monocle..socks

# Total elements: 966

# ================================================

# All omitted code points have Emoji_Modifier=No 
# @missing: 0000..10FFFF  ; Emoji_Modifier ; No

1F3FB..1F3FF  ; Emoji_Modifier       #  8.0  [5] (🏻..🏿)    light skin tone..dark skin tone

# Total elements: 5

# ================================================

# All omitted code points have Emoji_Modifier_Base=No 
# @missing: 0000..10FFFF  ; Emoji_Modifier_Base ; No

261D          ; Emoji_Modifier_Base  #  1.1  [1] (☝️)       index pointing up
26F9          ; Emoji_Modifier_Base  #  5.2  [1] (⛹️)       person bouncing ball
270A..270B    ; Emoji_Modifier_Base  #  6.0  [2] (✊..✋)    raised fist..raised hand
270C..270D    ; Emoji_Modifier_Base  #  1.1  [2] (✌️..✍️)    victory hand..writing hand
1F385         ; Emoji_Modifier_Base  #  6.0  [1] (🎅)       Santa Claus
1F3C2..1F3C4  ; Emoji_Modifier_Base  #  6.0  [3] (🏂..🏄)    snowboarder..person surfing
1F3C7         ; Emoji_Modifier_Base  #  6.0  [1] (🏇)       horse racing
1F3CA         ; Emoji_Modifier_Base  #  6.0  [1] (🏊)       person swimming
1F3CB..1F3CC  ; Emoji_Modifier_Base  #  7.0  [2] (🏋️..🏌️)    person lifting weights..person golfing
1F442..1F443  ; Emoji_Modifier_Base  #  6.0  [2] (👂..👃)    ear..nose
1F446..1F450  ; Emoji_Modifier_Base  #  6.0 [11] (👆..👐)    backhand index pointing up..open hands
1F466..1F469  ; Emoji_Modifier_Base  #  6.0  [4] (👦..👩)    boy..woman
1F46E         ; Emoji_Modifier_Base  #  6.0  [1] (👮)       police officer
1F470..1F478  ; Emoji_Modifier_Base  #  6.0  [9] (👰..👸)    bride with veil..princess
1F47C         ; Emoji_Modifier_Base  #  6.0  [1] (👼)       baby angel
1F481..1F483  ; Emoji_Modifier_Base  #  6.0  [3] (💁..💃)    person tipping hand..woman dancing
1F485..1F487  ; Emoji_Modifier_Base  #  6.0  [3] (💅..💇)    nail polish..person getting haircut
1F4AA         ; Emoji_Modifier_Base  #  6.0  [1] (💪)       flexed biceps
1F574..1F575  ; Emoji_Modifier_Base  #  7.0  [2] (🕴️..🕵️)    man in suit levitating..detective
1F57A         ; Emoji_Modifier_Base  #  9.0  [1] (🕺)       man dancing
1F590         ; Emoji_Modifier_Base  #  7.0  [1] (🖐️)       hand with fingers splayed
1F595..1F596  ; Emoji_Modifier_Base  #  7.0  [2] (🖕..🖖)    middle finger..vulcan salute
1F645..1F647  ; Emoji_Modifier_Base  #  6.0  [3] (🙅..🙇)    person gesturing NO..person bowing
1F64B..1F64F  ; Emoji_Modifier_Base  #  6.0  [5] (🙋..🙏)    person raising hand..folded hands
1F6A3         ; Emoji_Modifier_Base  #  6.0  [1] (🚣)       person rowing boat
1F6B4..1F6B6  ; Emoji_Modifier_Base  #  6.0  [3] (🚴..🚶)    person biking..person walking
1F6C0         ; Emoji_Modifier_Base  #  6.0  [1] (🛀)       person taking bath
1F6CC         ; Emoji_Modifier_Base  #  7.0  [1] (🛌)       person in bed
1F918         ; Emoji_Modifier_Base  #  8.0  [1] (🤘)       sign of the horns
1F919..1F91C  ; Emoji_Modifier_Base  #  9.0  [4] (🤙..🤜)    call me hand..right-facing fist
1F91E         ; Emoji_Modifier_Base  #  9.0  [1] (🤞)       crossed fingers
1F91F         ; Emoji_Modifier_Base  # 10.0  [1] (🤟)       love-you gesture
1F926         ; Emoji_Modifier_Base  #  9.0  [1] (🤦)       person facepalming
1F930         ; Emoji_Modifier_Base  #  9.0  [1] (🤰)       pregnant woman
1F931..1F932  ; Emoji_Modifier_Base  # 10.0  [2] (🤱..🤲)    breast-feeding..palms up together
1F933..1F939  ; Emoji_Modifier_Base  #  9.0  [7] (🤳..🤹)    selfie..person juggling
1F93D..1F93E  ; Emoji_Modifier_Base  #  9.0  [2] (🤽..🤾)    person playing water polo..person playing handball
1F9D1..1F9DD  ; Emoji_Modifier_Base  # 10.0 [13] (🧑..🧝)    adult..elf

Total elements: 102

# ================================================

# All omitted code points have Emoji_Component=No 
# @missing: 0000..10FFFF  ; Emoji_Component ; No

0023          ; Emoji_Component      #  1.1  [1] (#️)       number sign
002A          ; Emoji_Component      #  1.1  [1] (*️)       asterisk
0030..0039    ; Emoji_Component      #  1.1 [10] (0️..9️)    digit zero..digit nine
1F1E6..1F1FF  ; Emoji_Component      #  6.0 [26] (🇦..🇿)    regional indicator symbol letter a..regional indicator symbol letter z
1F3FB..1F3FF  ; Emoji_Component      #  8.0  [5] (🏻..🏿)    light skin tone..dark skin tone

# Total elements: 43

#EOF

';

}
}



?>
